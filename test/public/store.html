<!DOCTYPE html>
<html data-page-thing="1">
<head>
	<title>Sample page</title>
	<script src="window-page.js"></script>
	<script src="agent.js"></script>
	<script>
Page.route(function(state) {
	Page.store('thing'); // issue a read to populate cache
	state.data = {template: state.query.template};
	if (!state.query.template) return Promise.reject("Missing template query parameter");
	return GET({
		url: 'templates/' + state.query.template + '.html',
		type: 'html'
	}).then(function(doc) {
		state.document = doc;
	});
});
	</script>
</head>
<body>
Sample
</body>
</html>
